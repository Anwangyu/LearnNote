# 脑电波

## 脑电图终极指南

[脑电图：终极指南 (neurosky.com)](https://neurosky.com/biosensors/eeg-sensor/ultimate-guide-to-eeg/)

EEG代表脑电图，一种通常用于检测大脑电活动的测试。检测、记录和解释“脑电波”始于 1800 年代后期，当时发现了和探索哺乳动物大脑中的电模式，该技术已经发展到能够实现从神经系统疾病的医学检测到玩完全由大脑控制的游戏等应用。

要充分了解脑电图的工作原理，您必须首先了解人体如何使用电力在细胞之间传递信息。

### 电：大脑（和身体）的语言

我们的大脑和身体执行的每个功能都是由电信号实现的。一切都由原子组成，而原子又由质子、电子和中子组成。它们都有不同的电荷：

- 质子具有正电荷
- 电子具有负电荷
- 中子具有中性电荷

以下是对细胞如何交流的简化解释：当原子中的电荷不平衡时，原子变为带正电或负电，并允许电子从一个原子流向另一个原子以保持平衡。这种电子流就是我们所说的电。每个人体内大约有250亿亿个原子，我们有能力产生大量可测量的电力。

这些从原子到原子的电信号（或“脉冲”）使人体细胞能够相互交流。我们的神经系统传导这些脉冲，使它们从一个细胞跳到另一个细胞，直到它们到达预定的目的地。脉冲传输的速度各不相同——最快的脉冲可以以每小时约 <> 英里的速度传播。这就是为什么（例如）如果你烧伤了手，你的大脑能够在疼痛完全记录之前迅速将其从热源中移除。![脑电图终极指南——神经元](https://neurosky.com/wp-content/uploads/2016/08/Neuron_-_Nerve_Cell_04-300x228.png)

脑细胞的工作方式与左小指脚趾或舌头中的细胞相同。脑细胞没有什么“特别的”——它是允许人类思考、感受和交流的编程。就像计算器在没有编程和数字外部输入的情况下实际上无法进行数学运算一样，如果没有一层感官输入以及过去经验和学习的背景，大脑的物理结构也无法完成这些事情。

然而，当大脑——一台经过数百万年进化到能够实时编程和重新编程的无限复杂的计算机——发挥它的魔力时，大脑功能的基本组成部分仍然是电信号，它们可以被观察和测量。

### 脑电图的历史

虽然直到 1800 年代后期才观察到哺乳动物大脑的电脉冲，但你可以说 EEG 始于 1700 年代。就在那时，意大利生物学家路易吉·伽伐尼（Luigi Galvani）注意到，当电通电时，一只被解剖的青蛙的腿似乎活了过来。他首先提出电流导致肌肉收缩的理论。

近一个世纪后，英国科学家理查德·卡顿（Richard Caton）使用电极记录了包括猫和猴子在内的各种动物大脑中的电信号。由于他的方法需要暴露大脑，他无法在人类身上进行实验。尽管按照今天的标准，他的测量设备很简陋（更不用说痛苦的侵入性了），但他是第一个记录与睡眠、警觉性、镇静和死亡相关的脑电图信号差异的人。

![脑电图终极指南—第一个脑电图](https://neurosky.com/wp-content/uploads/2016/08/1st-eeg-berger-300x40.png)
1924年，德国精神病学家汉斯·伯杰（Hans Berger)成为第一位记录人类脑电图的研究人员。他的受试者是一名17岁的男孩，他的头骨上已经钻了一个洞，以治疗可疑的肿瘤。在這個實驗之後，他設計了記錄電信號的方法，而不在任何人的頭上打孔 - 他使用附在兒子頭皮上的非侵入性电极，並在自己身上嘗試銀针。伯杰的工作要么被同行忽视，要么被嘲笑，直到1934年，一对英国电生理学家证实了他的发现，伯杰被广泛称为脑电图之父。

### 现代脑电图 应用

#### 脑电图的医疗用途

脑电图测试用于诊断和评估各种神经系统疾病，例如癫痫。监测患者的脑电波可以让他们的医生深入了解大脑功能的任何异常。可以使用脑电图测试的其他疾病包括阿尔茨海默病和发作性睡病。

EEG还用于监测患者昏迷时的大脑活动。如果昏迷是自然的，并且患者处于完全的生命支持状态，脑电图可以检测到脑死亡。如果患者处于医学诱导的昏迷状态，则使用脑电图来确定使患者处于昏迷状态所需的适当镇静量。![脑电图终极指南—脑电图正在进行中](https://neurosky.com/wp-content/uploads/2016/08/eeg-in-progress-300x225.jpg)

如果由于身体创伤、药物滥用或任何其他因素而怀疑广泛的脑损伤，脑电图测试可以帮助确定损伤的实际程度。

脑电图不能测量大脑电活动以外的表现，也不能用于确定智力或诊断大多数心理健康状况（某些影响大脑电活动的精神病除外）。

与18世纪和19世纪的侵入性程序不同，现代脑电图测试是完全无痛和安全的。实际上没有给病人供电——它只是被测量。

#### 脑电技术与研究

脑电图技术使从医学到营销等各个领域的研究成为可能。最近对运动相关脑震荡的研究使用脑电图测试来确定持续多次脑震荡或其他头部创伤的短期和长期结果。脑电图在最近的睡眠研究中也发挥了重要作用，帮助研究人员了解各种睡眠长度和质量对人脑的真正影响。

脑电图测试也用于广告。观察眼球运动、面部表情和脑电波以确定各种媒体有效性的研究人员正在开创一个名为神经营销的领域，该领域旨在利用生物识别技术来提高媒体已经过度饱和的世界的广告成功几率。

这些只是脑电图技术支持的新兴和不断增长的研究领域的几个例子 - 人类参与和大脑活动的测量几乎具有普遍应用。

#### 支持脑电图的假肢

用你的思想控制假肢是科幻小说的内容，直到1999年，费城MCP Hahnemann医学院和达勒姆杜克大学（北卡罗来纳州）的研究人员之间的合作报告说，他们成功地让老鼠单独使用老鼠的大脑活动来控制一个简单的机器人。神经假肢领域很年轻，但很有前途。

15年后，一名截瘫患者戴着由自己的大脑信号控制的机器人外骨骼，拉开了2014年巴西世界杯的序幕。2015年，休斯顿大学的研究人员开发了一种算法，允许截肢者使用他用自己的思想控制的机器人手抓住物体。

神经假肢领域的早期研究需要更具侵入性的方法来记录大脑信号（很像理查德·卡顿和汉斯·伯杰的早期工作）。然而，休斯顿大学的机器人手仅由脑电图实现，标志着神经修复技术的巨大进步，并为失去肢体或行动能力的人带来了新的希望。

#### 支持脑电图的通信设备

大多数人都熟悉理论物理学家斯蒂芬霍金的故事，他在因肌萎缩侧索硬化症逐渐瘫痪后失去了说话的能力。他的言語在70年代末迅速惡化，這時他需要一個翻譯來與其他人清晰地溝通。在80年代，严重的肺炎发作需要气管切开术，这使他完全无法说话。

霍金使用计算机程序帮助他说话了几年，这在 1980 年代末和 90 年代初是相当高科技的。2005年，他开始使用一个程序，该程序允许他仅使用脸颊肌肉的运动通过计算机进行通信，并于2012年开始尝试脑电波驱动的通信设备。![Stephen_Hawking_in_Cambridge](https://neurosky.com/wp-content/uploads/2016/08/Stephen_Hawking_in_Cambridge-300x225.jpg)

仅由大脑活动驱动的通信设备即使在完全瘫痪的情况下也能恢复患者的言语。这项技术尚未完善，但新的研究很有希望，有朝一日可能会为ALS和其他退行性疾病患者带来完美的技术支持沟通。

#### 脑电图和教育

了解某人的大脑如何工作是一种令人难以置信的教育工具。教育系统缺乏资源和理解，这损害了教师有效指导有学习障碍或根本无法从传统教学方法中学习的学生的能力。

ADHD诊断和脑电图读数之间已经建立了一些联系，显示皮质电活动失调。虽然诊断不是教师的责任，但监测注意力和注意力的脑电图技术的应用可以更好地了解哪种教育技术最适合个别学生。此外，需要高度集中注意力的教育脑电图游戏可以帮助注意力不集中的学生训练他们的大脑更好地集中注意力。

#### 脑电娱乐

如果你能用你的头脑玩电子游戏会怎样？它可能没有神经假肢的科学引力，但它确实很有趣。神经游戏（你开始掌握这个命名约定的窍门了吗？）是另一个新的技术领域，绝对是游戏行业最令人兴奋的增长领域。

游戏开发公司Crooked Tree Studios使用NeuroSky的脑电图技术来构建[“用你的思想扔卡车”](http://developer.neurosky.com/wp-content/uploads/2016/07/Throw_Trucks_With_Your_Mind_Revolutionizing_Entertainment_with_Neurogaming.pdf)，其目的可能是不言自明的。玩家将他们的想法集中在一个物体上，并且[神经天空心灵波手机2耳机](http://store.neurosky.com/)解释他们大脑的电活动，捡起物体并向对手投掷物体。

《用你的头脑扔卡车》的创作者拉特·韦尔（Lat Ware）解释说，游戏的灵感来自他自己在实验性神经反馈疗法治疗注意力缺陷障碍方面的经验。得知他的大脑活动可以被计算机输入和解释，Ware着迷，最终他向NeuroSky开发者计划主任Johnny Liu提出了他的想法。Ware随后通过Kickstarter筹集了近50万美元，以启动他的项目。

支持神经游戏更多应用的技术已经存在，但直到最近，它太昂贵了，无法吸引视频游戏的普通消费者。现在，EEG耳机的购买价格低于最新的传统游戏机，神经游戏有望成为视频游戏娱乐的下一件大事。

### 脑电图的未来

随着EEG应用取得更多令人兴奋的发展以及硬件成本的降低，EEG对设备制造商的未来似乎充满希望。消费者越来越多地转向移动应用程序和可穿戴设备（如MyFitnessPal，Clue，MySugr或LifeBeat™健身追踪腕带），以深入了解他们的健康和保健指标，并帮助他们实现个人健康目标。由于脑电图数据可以被解释为测量生物特征，如注意力、注意力、精神疲劳、压力等，它提供了一个新的机会，让消费者深入了解他们的个人健康指标。

如上所述，随着个人脑电图设备对普通消费者来说变得负担得起，神经游戏应用几乎是无穷无尽的。可以用头脑控制的增强和虚拟现实游戏可能看起来像科幻小说，但现代游戏开发人员完全可以做到。结合其他生物识别技术，如心率、瞳孔扩张和面部表情分析，似乎一切皆有可能——如果你能观察、测量和解释它，你就可以做一个游戏。









## 资料准备

**模块：TGAM**，ThinkGear Asic Module，用于解码脑电波的硬件模块。

> ThinkGear AM （TGAM） 脑电传感器 PCB 模块为全球超过 1 万台消费类脑电图设备供电。
>
> TGAM是我们脑电波传感技术的核心。TGAM使NeuroSky合作伙伴能够快速有效地将基于EEG的消费技术推向市场。TGAM是世界上最受欢迎的脑电图解决方案。它与干电极一起感知来自人脑的信号，过滤掉外来噪音和电干扰，并转换为数字电源。这种“脑力”可用于健康和保健，教育和娱乐。
>
> 嵌入在TGAM中的是TGAT芯片，这是一个功能强大的，完全集成的单芯片脑电传感器。该芯片编程为NeuroSky eSense，A / D，放大头检测以及EMG和50/60Hz交流电力线干扰的噪声过滤。
>
> TGAM的定价是为了推动玩具、移动设备、教育装备和其他产品的大规模采用。

### 技术准备

> [NeuroSky - Wikipedia](https://en.wikipedia.org/wiki/NeuroSky)
>
> 人类[大脑](https://en.wikipedia.org/wiki/Brain)由数十亿个相互连接的[神经元](https://en.wikipedia.org/wiki/Neurons)组成;这些神经元之间的相互作用模式表示为思想和情绪状态。神经元之间的每次相互作用都会产生微小的放电;单独这些电荷不可能从头骨外部测量。然而，由数十万次并发放电产生的活动聚集成可以测量的波。
>
> 不同的大脑状态是不同神经相互作用模式的结果。这些模式导致具有不同振幅和频率的波;例如，12 到 30 赫兹之间的波，β 波，与注意力有关；而 8 到 12 赫兹之间的波，阿尔法波，与放松和精神平静状态有关。（肌肉的收缩也与独特的波模式有关，隔离这些模式是一些NeuroSky设备检测眨眼的方式。
>
> 所有电活动都会产生这些波（甚至是灯泡），因此所有电气设备都会产生一定程度的环境“噪音”;这种“噪音”会干扰大脑发出的电波，这就是为什么大多数脑电图设备即使不在人的头上也会接收读数。通过这些波测量心理活动就像试图在嘈杂的音乐会上偷听对话一样。过去，EEG设备通过在严格控制电活动的环境中测量这些信号并通过应用导电溶液增加来自大脑的数据的信号强度来规避这个问题。
>
> 然而，大多数人家里没有没有电子设备的房间，也不想每次使用 BCI 设备时在头部涂抹导电液体。NeuroSky已经开发了内置于其产品中的复杂[算法](https://en.wikipedia.org/wiki/Algorithm)，可以过滤掉这种“噪音”。[[7]](https://en.wikipedia.org/wiki/NeuroSky#cite_note-eightyone-7) NeuroSky白皮书声称，ThinkGear技术已经过测试，其准确率与研究级脑电图一样高96%。[[8](https://en.wikipedia.org/wiki/NeuroSky#cite_note-eightyseven-8)]，[[14]](https://en.wikipedia.org/wiki/NeuroSky#cite_note-nintysixprecent-14)
>
> NeuroSky还向研究机构销售非接触式传感器。这些是干[电极](https://en.wikipedia.org/wiki/Electrodes)，可以测量距离头皮毫米的脑电波，因此可以很容易地戴在头发上。[[15\]](https://en.wikipedia.org/wiki/NeuroSky#cite_note-mindcap-15)这些传感器是一项重大的技术突破，因为它们是有史以来唯一开发的非接触式脑电图传感器。[*[需要引用](https://en.wikipedia.org/wiki/Wikipedia:Citation_needed)*]
>
> 7.  Monica, Sierra (2008-02-16). ["NeuroSky to Present Project Millennia"](http://www.techpin.com/neurosky-to-present-project-millennia/). *Techpin.com*. Tech Pin. Retrieved 2010-07-31.
>
> 8. ^ [Jump up to:***a***](https://en.wikipedia.org/wiki/NeuroSky#cite_ref-eightyseven_8-0) [***b***](https://en.wikipedia.org/wiki/NeuroSky#cite_ref-eightyseven_8-1) Lin Lu, Zhong. ["Comparison of Mindflex Toy to EEG Research System"](https://www.youtube.com/watch?v=JGUMU537N4o). *Youtube.com*. University of Southern California. [Archived](https://ghostarchive.org/varchive/youtube/20211215/JGUMU537N4o) from the original on 2021-12-15. Retrieved 2010-07-31.
>
> 14.  ["NeuroSky's Brain Computer Interface – Bridging the Gap Between Research, Academia, and the Consumer"](http://www.ballantinesbiz.com/NeuroSky/NeuroSky_David_080410.html). *Ballantinesbiz.com*. Retrieved 2010-07-31.
> 15.  Luo, An (2010). ["A user-friendly SSVEP-based brain–computer interface using a time-domain classifier"](http://www.neurosky.com/Documents/Document.pdf?DocumentID=20214030-b4ec-424e-9948-7633ca602743) (PDF). *J. Neural. Eng*. Journal of Neural Enjoining. **7** (2): 26010. [Bibcode](https://en.wikipedia.org/wiki/Bibcode_(identifier)):[2010JNEng...7b6010L](https://ui.adsabs.harvard.edu/abs/2010JNEng...7b6010L). [doi](https://en.wikipedia.org/wiki/Doi_(identifier)):[10.1088/1741-2560/7/2/026010](https://doi.org/10.1088%2F1741-2560%2F7%2F2%2F026010). [PMID](https://en.wikipedia.org/wiki/PMID_(identifier)) [20332551](https://pubmed.ncbi.nlm.nih.gov/20332551). [S2CID](https://en.wikipedia.org/wiki/S2CID_(identifier)) [12135614](https://api.semanticscholar.org/CorpusID:12135614). Retrieved 2010-07-31.

### NeuroSky

[EEG Headsets | NeuroSky Store](https://store.neurosky.com/)

![image-20230413041347424](C:/Users/86133/AppData/Roaming/Typora/typora-user-images/image-20230413041347424.png)

- **eSense "专注度"指数**

  “eSense专注度指数”表明了使用者精神“集中度”水平或“注意度”水平的强烈程度，该指数值的范围是0到100。心烦意乱、精神恍惚、注意力不集中以及焦虑等精神状态都将降低专注度指数的数值。

- ### **eSense "放松度"指数**

  “eSense放松度指数” 表明了使用者精神“平静度”水平或者“放松度”水平。该指数值的范围是0到100。闭上眼睛通常是提高放松度值的有效方法。心烦意乱、精神恍惚、焦虑、激动不安等精神状态以及感官刺激等都将降低放松度指数的数值。

- ### **信号质量检测**

  指示捕捉到的脑电信号质量好坏。用户可基于此决定脑电信号是否可用。

- ### **眨眼检测**

  眨眼检测算法是输出用户眨眼时的数值。数值越大，眨眼的强度就越大，反之亦然。

- ### **用脑量**

  此算法测量用户在执行任务过程中大脑的相对工作量，即大脑的努力程度。这个任务可以是肢体活动，也可以是思维活动。数值越高，表示用脑量越大，以此可以对任务的难度进行评估和调整。它还可以用来检测连续努力工作后大脑是否已疲劳。

- ### **熟悉度**

  该算法测量的是对任务的学习、适应和理解的相对程度。利用这个算法，你可以看出用户在学习及认知过程中取得的进步，比如在打高尔夫或随机记忆数值时的熟练程度。

- **传感器接触皮肤检测**

  通过检测传感器和参考电极有没有接触导电物体如皮肤可确定耳机有无佩戴。

#### 应用点

> 1. 焦虑和压力检测：开发一个脑电波耳机系统，通过分析脑电信号来检测用户的焦虑和压力水平。这可以帮助用户更好地了解他们的情绪状态，并采取适当的放松和应对策略。
> 2. 睡眠质量监测：利用脑电波耳机监测用户在夜间的睡眠质量，包括睡眠时间、睡眠周期和睡眠深度。通过与智能手机或其他设备的应用程序，为用户提供有关如何改善睡眠质量的建议。
> 3. 注意力和专注度提升：设计一个能够监测用户注意力的脑电波耳机系统。根据用户的注意力水平，提供实时反馈和建议，如短暂休息、调整环境等，以提高专注度。
> 4. 无障碍通信：为有语言障碍或身体障碍的人开发一个基于脑电波的通信系统。用户可以通过意念来控制虚拟键盘或其他输入设备，实现无障碍沟通。
> 5. 脑控游戏和应用：开发一款基于脑电波的游戏或应用，使用户能够通过思考来控制游戏角色或应用操作。这可以提供一种全新的互动方式，增强用户的沉浸体验。
> 6. 冥想和放松辅助：设计一个使用脑电波耳机来辅助冥想和放松的系统。通过分析用户的脑电信号，为用户提供个性化的冥想引导和放松建议。
> 7. 疲劳驾驶预警：开发一个用于监测驾驶员疲劳的脑电波耳机系统。当检测到驾驶员出现疲劳迹象时，系统会发出警告并建议休息，从而降低交通事故风险。
>
> - 注意力：
>
>   注意力计算法指示心理“焦点”或“注意力”的强度。值范围为 0 到 100。当用户专注于单个想法或外部对象时，注意力水平会增加，而当分心时，注意力水平会降低。用户可以使用该算法观察他们集中注意力的能力。在教育环境中，可以跟踪对课程计划的关注，以衡量它们在吸引学生方面的有效性。在游戏中，注意力被用来创建对虚拟对象的“推动”控制。
>
> - 冥想
>
>   冥想计算法表示精神“平静”或“放松”的程度。该值的范围从 0 到 100，当用户放松头脑时增加，当他们感到不安或压力时减少。冥想计量化了找到正念内在状态的能力，因此可以帮助用户学习如何自我纠正并找到内在平衡以克服日常生活的压力。该算法还用于各种游戏设计控件。
>
> - 眨眼检测
>
>   眨眼检测算法会发出用户的眨眼信号。数字越大表示“更强”的闪烁，而较小的数字表示“较轻”或“较弱”的闪烁。眨眼的频率通常与紧张或疲劳有关。眼睛眨眼类似于标准的开/关二进制系统，因此对于需要明确响应的控件很有价值。例如，在通信应用中，一个眨眼表示否，两个表示是 - 为有特殊需求的个人提供了一种简单的沟通方式。
>
> - 脑力劳动
>
>   脑力劳动算法测量执行任务时的脑力工作量。用户的大脑在任务上工作越困难，价值就越高。该算法适用于物理（例如绘画）和精神（例如背诵）任务，可用于连续实时跟踪和试验间比较，以衡量多任务处理、工作量可变性等的影响。该算法可用于跟踪不同认知负荷对学习能力的影响，并为用户自我改进提供反馈。
>
> - 熟悉
>
>   熟悉度算法跟踪学习过程，以衡量对任务的理解、学习或舒适度的相对水平。它是对程序（运动）和心理任务的潜意识学习的衡量标准。在某些情况下，它反映了用户对任务的处理情况。通过观察趋势，用户可以更好地了解和评估他们的学习过程。它可以应用于物理性质（例如，绘画）或精神（例如，背诵）的任务，并使数据跟踪评估能够衡量学习状态。
>
> - 升值
>
>   欣赏算法提供实时测量受试者对外部视听刺激的享受或欣赏水平。该算法允许每时每刻检测情绪。在营销应用程序中，它可用于跟踪和了解用户的欣赏水平，为营销工作提供见解和战略方向。
>
> - 情感谱系
>
>   情绪谱系衡量情绪活动的强度（低-高）和愉快（愉快/不愉快）。
>
>   愉快/不愉快可识别用户是否有愉快或不愉快的情绪。愉快的情绪可以是快乐的、宁静的、放松的等。不愉快的情绪可能是愤怒、厌恶、抑郁等。
>
>   强度衡量用户的情绪实时强度。情绪可以是快乐的、愤怒的、平静的或任何其他情绪。4 电子强度级别 非常弱 – 弱 – 强 – 非常强。
>
> - 认知准备
>
>   认知准备衡量大脑在相对复杂的任务中获得最佳认知表现的能力，换句话说，衡量大脑对更高层次认知功能的能力。
>
>   论文：[doi:10.1016/j.clinph.2003.11.034 (neurosky.com)](https://download.neurosky.com/docs/papers/bcq/Angelakis_et_al_2004_Peak_alpha_frequency-an_electroencephalographic_measure_of_cognitive_preparedness.pdf)
>
> - 创造力
>
>   创造力衡量创造性认知背后的脑电波活动。创造力值越高，促进创新和创造性思维的脑电波活动就越强。
>
>   论文：[Fink_et_al_2011_Sensitivity_of_EEG_upper_alpha_activity_to_cognitive_and_affective_creativity_interventions.pdf (neurosky.com)](https://download.neurosky.com/docs/papers/bcq/Fink_et_al_2011_Sensitivity_of_EEG_upper_alpha_activity_to_cognitive_and_affective_creativity_interventions.pdf)
>
> - 警觉
>
>   警觉性衡量用户此刻的警觉性或警觉性水平。高警觉值表示您处于专注状态，而低值表示放松的心态。
>
>   论文：[PII: S0165-0173(98)00056-3 (neurosky.com)](https://download.neurosky.com/docs/papers/bcq/Klimesch_1999_EEG_alpha_and_theta_oscillations_reflect_cognitive_and_memory_performance.pdf)

#### 应用案例

[脑电应用案例 - NeuroSky 神念科技NeuroSky 神念科技](http://www.neurosky.com.cn/products-markets/eeg-biosensors/eeg-application/)

- 教育
  - 效率大师
  - MindMass VR脑电一体机
  - 香港儿童健康公益项目
  - 云端脑波教室
- 健康
  - 抑郁症辅助分析
  - 阿尔兹海默症的福音
  - 意念瑜伽
  - 造福失眠者的神器
  - 智能头盔：可读懂骑行者心情
  - 全球首个情绪跟踪平台VR Insight
- 娱乐
  - 脑波轨道车
  - 意念蜘蛛
  - 意念猫耳朵 Necomimi
  - 意念战甲
  - 意念对抗
  - 思达脑波火车
  - 思语脑波灯
  - Puzzlebox Orbit脑控飞机



## 开源实验室和仓库

> 以下是一些与脑电波项目相关的开源实验室和仓库，您可以参考这些资源来开发您的项目：
>
> 1. Brain-Computer Interface (BCI) with Python：这个仓库提供了使用 Python 编程语言实现基于脑电波的简单注意力监测和脑控应用的教程和代码。 GitHub 仓库链接：https://github.com/curiositycoder/Brain-Computer-Interface-with-Python
> 2. Muse LSL：这个仓库提供了一个用于实时处理和可视化 Muse 脑电波耳机数据的 Python 工具包。您可以使用这个库来开发您自己的实时脑电波应用。 GitHub 仓库链接：https://github.com/alexandrebarachant/muse-lsl
> 3. OpenBCI Python：这个仓库提供了一个用于与 OpenBCI 脑电波硬件进行通信和处理数据的 Python 库。这可以为您的项目提供一个与实际硬件交互的框架。 GitHub 仓库链接：https://github.com/OpenBCI/OpenBCI_Python
> 4. NeuroKit2：这是一个用于神经电生理信号处理的Python库。它包括对心电图（ECG）、脑电图（EEG）、皮肤电传导（EDA）等信号的处理功能，可以用于您的脑电波项目。 GitHub 仓库链接：https://github.com/neuropsychology/NeuroKit
> 5. MNE-Python：这是一个用于处理脑电图（EEG）、脑磁图（MEG）和其他神经电生理信号数据的Python库。这个库提供了丰富的数据处理和可视化功能，可以帮助您分析和解释脑电波数据。 GitHub 仓库链接：https://github.com/mne-tools/mne-python
> 6. PyEEG：这是一个用于处理脑电图（EEG）信号的Python模块。它包括了许多特征提取方法，如功率谱密度估计、熵计算等，可以用于您的脑电波项目。 GitHub 仓库链接：https://github.com/forrestbao/pyeeg





# 代码示例

## 流程分析

> 1. 要基于脑电波数据分析情绪差异并进行可视化展示，您可以采用以下步骤：
>
>    1. **数据收集**：收集足够的脑电波数据，确保数据包含多种情绪状态。这可能需要使用脑电波采集设备，如脑电图（EEG）头带，记录实验参与者在不同情绪状态下的脑电波数据。
>    2. **数据预处理**：对原始脑电波数据进行预处理，以消除噪声和伪迹。这可能包括降采样、滤波、去除眼动伪迹等操作。
>    3. **特征提取**：从预处理后的数据中提取有意义的特征，如波段功率（delta、theta、alpha、beta、gamma波）、能量谱密度、自相关等。这些特征可以帮助区分不同情绪状态。
>    4. **数据标注**：为数据集中的每个实例分配一个情绪标签，如正面、负面或中性。标注可以通过实验设计（如基于参与者观看特定刺激材料时的反应）或参与者自报进行。
>    5. **划分训练和测试集**：将数据集分为训练集和测试集，以便在训练集上训练模型，并在测试集上评估模型性能。
>    6. **模型选择与训练**：选择合适的分类模型（如支持向量机、随机森林、神经网络等），并在训练集上进行训练。在训练过程中，您可能需要调整模型参数以获得最佳性能。
>    7. **模型评估**：使用测试集评估模型性能。您可以使用诸如准确率、精确度、召回率、F1分数等指标，以及混淆矩阵来评估模型的效果。
>    8. **可视化展示**：在模型训练和评估完成后，可以通过各种可视化方法展示情绪分类结果。这可能包括混淆矩阵、分类报告，以及针对个体和群体的情绪分布图等。
>
>    一旦您的模型训练完成且性能达到预期，您可以将其应用于实时脑电波数据分析，实时检测和展示情绪状态变化。为了更好地理解情绪差异，您还可以尝试将分类结果与其他生理数据（如心率变异性、皮肤电导等）结合，以获得更全面的情绪分析。

## 常见的脑电波特征

> 在脑电波数据分析的上下文中，特征通常是从原始脑电波信号中提取出来的一些度量值，用于描述信号的某些属性。这些特征可以帮助我们分析信号，从而理解脑电波信号与特定任务（如情绪分类）之间的关系。
>
> 以下是一些常见的脑电波特征：
>
> 1. 频率分量（FFT）：使用快速傅里叶变换（FFT）将信号从时域转换到频域，可以得到信号中各个频率成分的幅值。这些频率分量可以作为特征用于后续的分析和建模。
> 2. 功率谱密度（PSD）：功率谱密度z是信号功率在频率域上的分布。它可以帮助我们了解信号在不同频率下的能量分布。
> 3. 时间域特征：如均值、标准差、最大值、最小值等。这些特征可以帮助我们了解信号在时域上的基本统计特性。
> 4. 复杂度和非线性特征：如样本熵、赫斯特指数、Lyapunov指数等。这些特征可以揭示信号的复杂度和非线性动力学特性。
>
> 在进行情绪分类任务时，通常需要根据实际情况选择合适的特征。这可能需要一些实验和优化，以找到对于特定任务最有效的特征组合。在实际应用中，可能需要尝试不同的特征提取方法和特征选择技术，以便找到最佳的特征子集。

## 现有数据集

> 是的，有许多公共可用的脑电波数据集可以用于情绪分析、神经科学研究和其他相关领域的研究。以下是一些常用的脑电波数据集：
>
> 1. Emotion Recognition from EEG Data (EmoReact): 这个数据集由60个人在观看视频片段时的EEG数据组成。数据集包含了1800个时间窗口，每个时间窗口长2秒，总共有四种情绪（高兴、惊讶、悲伤和愤怒）的标签。这个数据集可以用于情绪识别和情绪分析。
> 2. DEAP: 这个数据集由32个参与者的EEG数据组成，参与者被要求观看音频-视觉刺激并记录其反应。数据集包括了40个二进制文件，每个文件对应于一个参与者的数据。每个文件包含了一个EEG信号、相应的生理信号（如心率和呼吸）以及一些元数据。这个数据集可以用于情绪分类和神经科学研究。
> 3. BCI Competition IV 2a: 这个数据集由22个参与者的EEG数据组成，参与者被要求通过想象左手和右手的运动来控制一个光标。数据集包括了许多不同类型的EEG信号，包括时间-频率图、维数约减和熵的特征。这个数据集可以用于脑机接口（BCI）研究和运动识别。
> 4. PhysioNet EEG Motor Movement/Imagery Dataset: 这个数据集包含了62个参与者的EEG数据，参与者被要求进行左手、右手和脚的想象运动，并记录EEG信号。数据集包括许多不同类型的EEG信号，包括频率、功率和时间-频率分析。这个数据集可以用于脑机接口研究和运动想象分类。
>
> 这些数据集可以在其官方网站上免费下载和使用。
>
> **我们采用：Kaggle开源代码网站提供的情感数据 **    来源：[🤷 EEG Emotion Prediction | Kaggle](https://www.kaggle.com/code/gcdatkin/eeg-emotion-prediction/input)
>
> **Kaggle网站提供的EEG数据集的特征标注：**
>
> 1. mean（平均值）：指脑电波信号的平均值。
> 2. stddev（标准差）：指脑电波信号的标准差，即数据分散程度的度量。
> 3. moments（矩）：指脑电波信号的各阶矩（如均值、方差、偏度和峰度）。
> 4. max（最大值）：指脑电波信号的最大值。
> 5. min（最小值）：指脑电波信号的最小值。
> 6. covmat（协方差矩阵）：指脑电波信号的协方差矩阵，用于描述不同脑区之间的关系。
> 7. eigen（特征值）：指脑电波信号的特征值，用于描述协方差矩阵的性质。
> 8. logm（对数矩阵）：指脑电波信号的对数矩阵，用于简化协方差矩阵的计算。
> 9. correlate（相关系数）：指脑电波信号的相关系数，用于描述不同脑区之间的关系。
> 10. fft（快速傅里叶变换）：指将脑电波信号转换为频域信号的技术，可以用于分析脑电波信号的频率和周期性。

## 混淆矩阵

> 混淆矩阵是一种可视化工具，用于评估分类模型的性能。它显示了模型在测试数据集上的预测结果与实际结果之间的对应关系。混淆矩阵的每行表示实际类别，每列表示预测类别。矩阵中的每个单元格表示在该类别下的实例数量。对角线上的单元格表示正确分类的实例数量，而非对角线上的单元格表示被误分类的实例数量。
>
> 通过观察混淆矩阵，您可以了解模型在哪些类别上表现较好或较差，以及模型容易将哪些类别混淆。这有助于您进一步优化模型，以提高在特定类别上的性能。
>
> 在给您提供的代码示例中，混淆矩阵用于显示脑电波数据分类模型的性能。您需要根据您的具体任务和类别标签设置`label_mapping`字典，以便混淆矩阵反映您的实际项目需求。
>
> 对于混淆矩阵，以下是一些可能的解释：
>
> 1. 对角线上的值越高，表示模型在相应类别上的性能越好。
> 2. 非对角线上的值越高，表示模型在区分这两个类别时更容易出错。
>
> 通过查看混淆矩阵，您可以更好地了解模型的性能，并找出可能需要改进的领域。



## Example One

这里有一个使用Python编写的基于脑电波数据的训练和测试代码示例。这个示例使用了公开的EEG数据集，并采用了Scikit-learn库来训练和测试一个简单的分类器。

```python
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt

from sklearn.model_selection import train_test_split
from sklearn.preprocessing import StandardScaler
from sklearn.svm import SVC
from sklearn.metrics import classification_report, confusion_matrix
import seaborn as sns
import mne

plt.rcParams['font.sans-serif']=['SimHei'] #用来正常显示中文标签
plt.rcParams['axes.unicode_minus']=False #用来正常显示负号 #有中文出现的情况，需要u'内容'

# 读取示例数据集
data_path = 'MNE-sample-data'
raw_fname = data_path + '/MEG/sample/sample_audvis_filt-0-40_raw.fif'

# 加载原始EEG数据
raw = mne.io.read_raw_fif(raw_fname, preload=True)

# 选择EEG通道
raw.pick_types(meg=False, eeg=True, eog=False, stim=False)

# 获取数据和时间戳
data, times = raw[:]
labels = np.random.randint(0, 2, len(data[0]))

# 预处理数据
scaler = StandardScaler()
data = scaler.fit_transform(data.T)

# 划分数据集
X_train, X_test, y_train, y_test = train_test_split(data, labels, test_size=0.3, random_state=42)

# 训练SVM分类器
clf = SVC(kernel='linear', C=1)
clf.fit(X_train, y_train)

# 预测
y_pred = clf.predict(X_test)

# 计算性能指标
print("Classification Report:")
print(classification_report(y_test, y_pred))


label_mapping = {'NEGATIVE': 0, 'NEUTRAL': 1, 'POSITIVE': 2}


# 绘制混淆矩阵
cm = confusion_matrix(y_test, y_pred)
plt.figure(figsize=(8, 8))
sns.heatmap(cm, annot=True, vmin=0, fmt='g', cbar=False, cmap='Blues')
plt.xticks(np.arange(len(label_mapping)) + 0.5, label_mapping.keys())
plt.yticks(np.arange(len(label_mapping)) + 0.5, label_mapping.keys())
plt.xlabel("预测结果")
plt.ylabel("实际结果")
plt.title("混淆矩阵-评估分类模型的性能")
plt.show()
```

请注意，这个示例使用了MNE-Python库中的一个示例数据集。在实际应用中，您需要将这个数据集替换为您自己的脑电波数据。此外，您还可以尝试使用其他特征提取方法以及不同的机器学习模型，以便更好地适应您的具体任务。

### 代码解析

> 这段代码的主要目的是使用支持向量机（SVM）对原始EEG（脑电图）数据进行分类，并评估分类模型的性能。以下是代码的详细解析：
>
> 1. 导入所需库：
>    - numpy：用于处理数组和矩阵的库
>    - pandas：用于数据处理和分析的库
>    - matplotlib.pyplot：用于创建图形的库
>    - sklearn：机器学习库，包含了多种分类器和预处理方法
>    - seaborn：基于matplotlib的数据可视化库，提供更高级的图形绘制功能
>    - mne：用于处理神经电生理（MEG和EEG）数据的库
> 2. 设置字体参数以显示中文标签和正常显示负号。
> 3. 读取示例数据集：
>    - data_path：示例数据集的路径
>    - raw_fname：原始EEG数据文件的路径
> 4. 加载原始EEG数据：
>    - 使用mne库读取原始EEG数据文件，并将数据预加载到内存中。
> 5. 选择EEG通道：
>    - 使用pick_types方法，只保留EEG通道的数据，排除其他通道（如MEG、EOG、stim）。
> 6. 获取数据和时间戳：
>    - 提取EEG数据及其对应的时间戳
>    - 为每个数据点生成随机标签（0或1）
> 7. 预处理数据：
>    - 使用StandardScaler对数据进行标准化处理，使其均值为0，方差为1。
> 8. 划分数据集：
>    - 使用train_test_split方法，将数据集分为训练集（70%）和测试集（30%）。
> 9. 训练SVM分类器：
>    - 创建一个线性核函数的SVC（支持向量分类）实例，并设置惩罚系数C为1。
>    - 使用训练集数据拟合SVM分类器。
> 10. 预测：
>     - 使用训练好的SVM分类器对测试集数据进行预测。
> 11. 计算性能指标：
>     - 使用classification_report和confusion_matrix方法，生成并打印分类报告和混淆矩阵。
> 12. 定义标签映射：
>     - 为混淆矩阵的横纵坐标设置标签。
> 13. 绘制混淆矩阵：
>     - 使用seaborn的heatmap方法绘制混淆矩阵图形。
>     - 设置x轴和y轴的刻度及标签。
>     - 设置x轴和y轴的标签说明。
>     - 设置图形标题。
>     - 使用plt.show()显示图形。
>
> 这段代码首先对EEG数据进行预处理和划分，然后使用SVM分类器进行训练和预测。最后，通过计算分类性能指标和绘制混淆矩阵来评估分类模型的性能。



## Example Two

以下是一个基于脑电波数据分析情绪差异的完整代码示例。请注意，包含特征和标签的数据集（`data.csv`）来源：[🤷 EEG Emotion Prediction | Kaggle](https://www.kaggle.com/code/gcdatkin/eeg-emotion-prediction/input)。这个示例使用了随机森林分类器。

```python
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
from sklearn.model_selection import train_test_split
from sklearn.preprocessing import StandardScaler
from sklearn.metrics import confusion_matrix, classification_report
from sklearn.ensemble import RandomForestClassifier


plt.rcParams['font.sans-serif']=['SimHei'] #用来正常显示中文标签
plt.rcParams['axes.unicode_minus']=False #用来正常显示负号 #有中文出现的情况，需要u'内容'

# 加载数据集
data = pd.read_csv('dataset/emotions.csv')


# 数据预处理
def preprocess_inputs(df):
    df = df.copy()
    label_mapping = {'NEGATIVE': 0, 'NEUTRAL': 1, 'POSITIVE': 2}
    df['label'] = df['label'].replace(label_mapping)

    y = df['label'].copy()
    X = df.drop('label', axis=1).copy()

    X_train, X_test, y_train, y_test = train_test_split(X, y, train_size=0.7, random_state=123)

    scaler = StandardScaler()
    X_train = scaler.fit_transform(X_train)
    X_test = scaler.transform(X_test)

    return X_train, X_test, y_train, y_test


X_train, X_test, y_train, y_test = preprocess_inputs(data)

# 模型训练
model = RandomForestClassifier(random_state=123)
model.fit(X_train, y_train)

# 模型评估
y_pred = model.predict(X_test)
cm = confusion_matrix(y_test, y_pred)
clr = classification_report(y_test, y_pred, target_names=['NEGATIVE', 'NEUTRAL', 'POSITIVE'])

print("Confusion Matrix:\n", cm)
print("\nClassification Report:\n", clr)

# 可视化混淆矩阵
plt.figure(figsize=(8, 8))
sns.heatmap(cm, annot=True, fmt='g', cbar=False, cmap='Blues')
plt.xticks(np.arange(3) + 0.5, ['NEGATIVE', 'NEUTRAL', 'POSITIVE'])
plt.yticks(np.arange(3) + 0.5, ['NEGATIVE', 'NEUTRAL', 'POSITIVE'])
plt.xlabel("预测结果")
plt.ylabel("实际结果")
plt.title("混淆矩阵")
plt.show()
```

### 代码解析

> 这段代码的主要目的是使用随机森林分类器对情感数据进行分类，并评估分类模型的性能。以下是代码的详细解析：
>
> 1. 导入所需库：
>    - numpy：用于处理数组和矩阵的库
>    - pandas：用于数据处理和分析的库
>    - matplotlib.pyplot：用于创建图形的库
>    - seaborn：基于matplotlib的数据可视化库，提供更高级的图形绘制功能
>    - sklearn：机器学习库，包含了多种分类器和预处理方法
> 2. 设置字体参数以显示中文标签和正常显示负号。
> 3. 加载数据集：
>    - 使用pandas库读取CSV文件，并将其存储为数据框。
> 4. 数据预处理：
>    - preprocess_inputs函数接受一个数据框作为输入，首先将情感标签（NEGATIVE、NEUTRAL、POSITIVE）替换为整数（0、1、2）。
>    - 将标签列分离出来作为y，剩下的特征作为X。
>    - 使用train_test_split方法，将数据集分为训练集（70%）和测试集（30%）。
>    - 使用StandardScaler对数据进行标准化处理，使其均值为0，方差为1。
>    - 返回分好的训练集和测试集。
> 5. 调用预处理函数，获取训练集和测试集。
> 6. 模型训练：
>    - 创建一个随机森林分类器实例，设置随机数种子为123。
>    - 使用训练集数据拟合随机森林分类器。
> 7. 模型评估：
>    - 使用训练好的随机森林分类器对测试集数据进行预测。
>    - 计算并打印混淆矩阵和分类报告。
> 8. 可视化混淆矩阵：
>    - 使用seaborn的heatmap方法绘制混淆矩阵图形。
>    - 设置x轴和y轴的刻度及标签。
>    - 设置x轴和y轴的标签说明。
>    - 设置图形标题。
>    - 使用plt.show()显示图形。
>
> 这段代码首先对情感数据进行预处理和划分，然后使用随机森林分类器进行训练和预测。最后，通过计算分类性能指标并绘制混淆矩阵来评估分类模型的性能。

## 代码区别

> 这两段代码的主要区别在于使用的预处理方法和分类模型：
>
> 1. 数据预处理：
>    - 第一段代码首先选取EEG通道，然后使用StandardScaler对数据进行标准化处理。
>    - 第二段代码在预处理函数中，将情感标签替换为整数，然后使用StandardScaler对特征进行标准化处理。
> 2. 分类模型：
>    - 第一段代码使用支持向量机（SVM）作为分类器，使用线性核函数并设置惩罚系数C为1。
>    - 第二段代码使用随机森林作为分类器，设置随机数种子以确保结果可复现。

### 分类模型的不同：支持向量机（SVM）和随机森林

支持向量机（SVM）和随机森林是两种不同的机器学习算法，它们在分类和回归任务中均有广泛的应用。下面分别介绍它们的概念及二者之间的区别。

- **支持向量机（SVM）：**

  SVM是一种监督学习方法，主要用于分类和回归任务。在分类问题中，SVM试图找到一个超平面，能够将不同类别的数据分开。这个超平面被选取为最大化不同类别之间的边缘（也就是最近的数据点之间的距离）。支持向量是距离超平面最近的数据点，它们决定了超平面的位置。在非线性问题中，SVM通过将数据映射到高维空间（通过核函数）来寻找一个能够分隔数据的超平面。

- **随机森林：**

  随机森林是一种集成学习方法，它通过构建多个决策树并结合它们的预测结果来提高预测性能。在训练过程中，随机森林通过自助抽样（有放回的抽样）来构建每个决策树的训练数据，同时在每个节点选择最优分裂特征时，仅考虑随机选取的一部分特征。这两个随机化策略有助于降低模型的方差，提高泛化性能。

- **SVM与随机森林的区别：**

  1. 算法原理：SVM基于几何间隔最大化，寻找一个能够分隔数据的超平面；随机森林通过集成多个决策树，利用多个模型的预测结果来提高整体性能。
  2. 模型复杂度：SVM通常产生一个简单的模型（线性或非线性超平面）；随机森林产生一个相对复杂的模型，由多个决策树组成。
  3. 训练速度：SVM在大型数据集上的训练速度可能较慢；随机森林的训练速度通常较快，因为可以并行训练多个决策树。
  4. 预测性能：SVM在一些线性可分或通过核技巧能够很好地处理的问题上表现出色；随机森林在很多问题上表现良好，具有较好的泛化性能。

- **随机森林的优势：**

  1. 通过集成多个决策树，降低模型的方差。
  2. 不易过拟合：由于随机森林采用自助抽样和随机特征选择的方法来构建决策树，这使得模型具有很好的泛化能力，降低了过拟合的风险。
  3. 并行计算：随机森林可以并行构建多个决策树，从而提高训练速度。这使得随机森林在处理大型数据集时具有较高的计算效率。
  4. 自动特征选择：随机森林在构建决策树过程中可以计算特征的重要性，这有助于识别对模型性能影响较大的特征，实现自动特征选择。
  5. 可处理高维数据和多分类问题：随机森林可以处理具有大量特征的数据集，同时也能很好地解决多分类问题。
  6. 适用于分类和回归任务：随机森林既可以用于分类任务（投票机制），也可以用于回归任务（取决策树预测值的平均值）。
  7. 易于解释：虽然随机森林是一个由多个决策树组成的复杂模型，但每个决策树的结构相对简单，便于理解和解释。
  8. 鲁棒性：随机森林对噪声和异常值具有较好的鲁棒性。
